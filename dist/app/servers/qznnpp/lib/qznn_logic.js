"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getDoubleByConfig = exports.getCardColour = exports.getCardValue = exports.bipai = exports.getCardType = exports.pukes = exports.shuffle = exports.CardsType = void 0;
var CardsType;
(function (CardsType) {
    CardsType[CardsType["niuniu_00"] = 0] = "niuniu_00";
    CardsType[CardsType["niuniu_01"] = 1] = "niuniu_01";
    CardsType[CardsType["niuniu_02"] = 2] = "niuniu_02";
    CardsType[CardsType["niuniu_03"] = 3] = "niuniu_03";
    CardsType[CardsType["niuniu_04"] = 4] = "niuniu_04";
    CardsType[CardsType["niuniu_05"] = 5] = "niuniu_05";
    CardsType[CardsType["niuniu_06"] = 6] = "niuniu_06";
    CardsType[CardsType["niuniu_07"] = 7] = "niuniu_07";
    CardsType[CardsType["niuniu_08"] = 8] = "niuniu_08";
    CardsType[CardsType["niuniu_09"] = 9] = "niuniu_09";
    CardsType[CardsType["niuniu_10"] = 10] = "niuniu_10";
    CardsType[CardsType["niuniu_11"] = 11] = "niuniu_11";
    CardsType[CardsType["niuniu_12"] = 12] = "niuniu_12";
    CardsType[CardsType["niuniu_13"] = 13] = "niuniu_13";
    CardsType[CardsType["niuniu_14"] = 14] = "niuniu_14";
})(CardsType = exports.CardsType || (exports.CardsType = {}));
;
function shuffle() {
    const cards = [];
    for (let i = 1; i <= 52; i++) {
        cards.push(i);
    }
    cards.sort(() => 0.5 - Math.random());
    return cards;
}
exports.shuffle = shuffle;
;
exports.pukes = ["", '黑A', '黑2', '黑3', '黑4', '黑5', '黑6', '黑7', '黑8', '黑9', '黑10', '黑J', '黑Q', '黑K',
    '红A', '红2', '红3', '红4', '红5', '红6', '红7', '红8', '红9', '红10', '红J', '红Q', '红K',
    '梅A', '梅2', '梅3', '梅4', '梅5', '梅6', '梅7', '梅8', '梅9', '梅10', '梅J', '梅Q', '梅K',
    '方A', '方2', '方3', '方4', '方5', '方6', '方7', '方8', '方9', '方10', '方J', '方Q', '方K',
];
function getCardType(theCards) {
    let cow = 0;
    let cows = [];
    let total = 0;
    let arr_2 = [];
    const arr_1 = theCards.map(card => {
        let ret = getCardValue(card);
        let value = arr_2.find(m => m.id === ret);
        value ? (value.count += 1) : arr_2.push({ id: ret, count: 1 });
        ret = ret >= 10 ? 10 : ret;
        total += ret;
        return ret;
    });
    if (total <= 10 && arr_1.every(c => c < 5)) {
        return { count: CardsType.niuniu_14, cows: [0, 1, 2] };
    }
    if (arr_2.find(m => m.count == 4)) {
        return { count: CardsType.niuniu_13, cows: [0, 1, 2] };
    }
    if (arr_1.every(card => card >= 11)) {
        return { count: CardsType.niuniu_12, cows: [0, 1, 2] };
    }
    if (arr_1.reduce((total, v) => total += v >= 11 ? 1 : 0, 0) == 4 && arr_1.includes(10)) {
        return { count: CardsType.niuniu_11, cows: [0, 1, 2] };
    }
    for (let i = 0; i < 4; i++) {
        for (let j = i + 1; j < 5; j++) {
            if ((total - arr_1[i] - arr_1[j]) % 10 == 0) {
                cows = [0, 1, 2, 3, 4].filter(m => m !== i && m !== j);
                cow = (arr_1[i] + arr_1[j]) % 10;
                cow = cow === 0 ? 10 : cow;
            }
        }
    }
    return { count: cow, cows };
}
exports.getCardType = getCardType;
function bipai(theCards1, theCards2) {
    let fight1 = getCardType(theCards1);
    let fight2 = getCardType(theCards2);
    if (fight1.count === fight2.count) {
        const arr1 = theCards1.slice();
        const arr2 = theCards2.slice();
        arr1.sort((a, b) => {
            let ret = getCardValue(b) - getCardValue(a);
            if (ret == 0) {
                ret = getCardColour(b) - getCardColour(a);
                return ret;
            }
            return ret;
        });
        arr2.sort((a, b) => {
            let ret = getCardValue(b) - getCardValue(a);
            if (ret == 0) {
                ret = getCardColour(b) - getCardColour(a);
                return ret;
            }
            return ret;
        });
        const max1 = getCardValue(arr1[0]), max2 = getCardValue(arr2[0]);
        if (max1 === max2) {
            return getCardColour(arr1[0]) > getCardColour(arr2[0]);
        }
        return max1 > max2;
    }
    return fight1.count > fight2.count;
}
exports.bipai = bipai;
function getCardValue(card) {
    let t = card % 13;
    if (t == 0) {
        t = 13;
    }
    return t;
}
exports.getCardValue = getCardValue;
;
function getCardColour(poker) {
    if (poker >= 1 && poker <= 13) {
        return 4;
    }
    else if (poker >= 14 && poker <= 26) {
        return 3;
    }
    else if (poker >= 27 && poker <= 39) {
        return 2;
    }
    else {
        return 1;
    }
}
exports.getCardColour = getCardColour;
function getDoubleByConfig(row) {
    if ([0, 1, 2, 3, 4, 5, 6].includes(row)) {
        return 1;
    }
    if ([7, 8, 9].includes(row)) {
        return 2;
    }
    if ([CardsType.niuniu_10].includes(row)) {
        return 3;
    }
    if ([CardsType.niuniu_11, CardsType.niuniu_12].includes(row)) {
        return 4;
    }
    if ([CardsType.niuniu_13, CardsType.niuniu_14].includes(row)) {
        return 5;
    }
    return 1;
}
exports.getDoubleByConfig = getDoubleByConfig;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicXpubl9sb2dpYy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL2FwcC9zZXJ2ZXJzL3F6bm5wcC9saWIvcXpubl9sb2dpYy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFRQSxJQUFZLFNBK0JYO0FBL0JELFdBQVksU0FBUztJQUVqQixtREFBYSxDQUFBO0lBRWIsbURBQVMsQ0FBQTtJQUVULG1EQUFTLENBQUE7SUFFVCxtREFBUyxDQUFBO0lBRVQsbURBQVMsQ0FBQTtJQUVULG1EQUFTLENBQUE7SUFFVCxtREFBUyxDQUFBO0lBRVQsbURBQVMsQ0FBQTtJQUVULG1EQUFTLENBQUE7SUFFVCxtREFBUyxDQUFBO0lBRVQsb0RBQVMsQ0FBQTtJQUVULG9EQUFTLENBQUE7SUFFVCxvREFBUyxDQUFBO0lBRVQsb0RBQVMsQ0FBQTtJQUVULG9EQUFTLENBQUE7QUFDYixDQUFDLEVBL0JXLFNBQVMsR0FBVCxpQkFBUyxLQUFULGlCQUFTLFFBK0JwQjtBQUFBLENBQUM7QUFHRixTQUFnQixPQUFPO0lBQ25CLE1BQU0sS0FBSyxHQUFhLEVBQUUsQ0FBQztJQUMzQixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQzFCLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDakI7SUFFRCxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztJQUN0QyxPQUFPLEtBQUssQ0FBQztBQUNqQixDQUFDO0FBUkQsMEJBUUM7QUFBQSxDQUFDO0FBQ1csUUFBQSxLQUFLLEdBQUcsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSTtJQUNuRyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJO0lBQzdFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUk7SUFDN0UsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSTtDQUNoRixDQUFDO0FBT0YsU0FBZ0IsV0FBVyxDQUFDLFFBQWtCO0lBRTFDLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQztJQUVaLElBQUksSUFBSSxHQUFhLEVBQUUsQ0FBQztJQUN4QixJQUFJLEtBQUssR0FBRyxDQUFDLENBQUM7SUFDZCxJQUFJLEtBQUssR0FBb0MsRUFBRSxDQUFDO0lBRWhELE1BQU0sS0FBSyxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUU7UUFDOUIsSUFBSSxHQUFHLEdBQUcsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzdCLElBQUksS0FBSyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQzFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUMvRCxHQUFHLEdBQUcsR0FBRyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7UUFDM0IsS0FBSyxJQUFJLEdBQUcsQ0FBQztRQUNiLE9BQU8sR0FBRyxDQUFDO0lBQ2YsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFJLEtBQUssSUFBSSxFQUFFLElBQUksS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRTtRQUN4QyxPQUFPLEVBQUUsS0FBSyxFQUFFLFNBQVMsQ0FBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDO0tBQzFEO0lBRUQsSUFBSSxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUMsRUFBRTtRQUMvQixPQUFPLEVBQUUsS0FBSyxFQUFFLFNBQVMsQ0FBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDO0tBQzFEO0lBRUQsSUFBSSxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQyxFQUFFO1FBQ2pDLE9BQU8sRUFBRSxLQUFLLEVBQUUsU0FBUyxDQUFDLFNBQVMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUM7S0FDMUQ7SUFDRCxJQUFJLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxLQUFLLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFD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