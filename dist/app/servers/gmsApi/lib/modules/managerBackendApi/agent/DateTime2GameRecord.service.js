"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.DateTime2GameRecordService = void 0;
const moment = require("moment");
class DateTime2GameRecordService {
    async breakUpDate(startTimestamp = null, endTimestamp = null) {
        if (startTimestamp === null && endTimestamp === null) {
            const startDateTime = moment().format("YYYY-MM-DD 00:00:00");
            const endDateTime = moment().format("YYYY-MM-DD 23:59:59");
            return [[], [startDateTime, endDateTime]];
        }
        if (moment(startTimestamp).format("YYYY-MM-DD HH:mm:ss") >= moment().format("YYYY-MM-DD 00:00:00") && moment(endTimestamp).format("YYYY-MM-DD HH:mm:ss") <= moment().format("YYYY-MM-DD 23:59:59")) {
            const startDateTime = moment(startTimestamp).format("YYYY-MM-DD HH:mm:ss");
            const endDateTime = moment(endTimestamp).format("YYYY-MM-DD HH:mm:ss");
            return [[], [startDateTime, endDateTime]];
        }
        if (moment(endTimestamp).format("YYYY-MM-DD HH:mm:ss") < moment().format("YYYY-MM-DD HH:mm:ss")) {
            const startDateTime = moment(startTimestamp).format("YYYY-MM-DD HH:mm:ss");
            const endDateTime = moment(endTimestamp).format("YYYY-MM-DD HH:mm:ss");
            return [[startDateTime, endDateTime], []];
        }
        if (moment(endTimestamp).format("YYYY-MM-DD HH:mm:ss") > moment().format("YYYY-MM-DD HH:mm:ss") && moment(startTimestamp).format("YYYY-MM-DD HH:mm:ss") < moment().format("YYYY-MM-DD 00:00:00")) {
            const startDateTime = moment(startTimestamp).format("YYYY-MM-DD 00:00:00");
            const endDateTime = moment().subtract(1, 'd').format("YYYY-MM-DD 23:59:59");
            const todayStartDateTime = moment().format("YYYY-MM-DD 00:00:00");
            const todayEndDateTime = moment(endTimestamp).format("YYYY-MM-DD 23:59:59");
            return [[startDateTime, endDateTime], [todayStartDateTime, todayEndDateTime]];
        }
        return [[], []];
    }
    async newBreakUpDate(startTimestamp = null, endTimestamp = null) {
        if (startTimestamp === null && endTimestamp === null) {
            const startDateTime = moment().format("YYYY-MM-DD 00:00:00");
            const endDateTime = moment().format("YYYY-MM-DD 23:59:59");
            return [[], [], [startDateTime, endDateTime]];
        }
        if (moment(startTimestamp).format("YYYY-MM-DD HH:mm:ss") >= moment().format("YYYY-MM-DD 00:00:00") && moment(endTimestamp).format("YYYY-MM-DD HH:mm:ss") <= moment().format("YYYY-MM-DD 23:59:59")) {
            const startDateTime = moment(startTimestamp).format("YYYY-MM-DD HH:mm:ss");
            const endDateTime = moment(endTimestamp).format("YYYY-MM-DD HH:mm:ss");
            return [[], [], [startDateTime, endDateTime]];
        }
        const endTime = moment(endTimestamp).format("YYYY-MM-DD HH:mm:ss");
        const startTime = moment(startTimestamp).format("YYYY-MM-DD HH:mm:ss");
        if (startTime == moment(startTimestamp).format("YYYY-MM-DD 00:00:00")) {
            if (endTime == moment(endTimestamp).format("YYYY-MM-DD 23:59:59") && endTime == moment().format("YYYY-MM-DD 23:59:59")) {
                let endSubtract = moment(endTimestamp).subtract(1, 'days').format("YYYY-MM-DD 23:59:59");
                let startTodayTime = moment(endTimestamp).format("YYYY-MM-DD 00:00:00");
                return [[], [startTime, endSubtract], [startTodayTime, endTime]];
            }
            else if (endTime < moment(endTimestamp).format("YYYY-MM-DD 23:59:59")) {
                let endSubtract = moment(endTimestamp).subtract(1, 'days').format("YYYY-MM-DD 23:59:59");
                let startTodayTime = moment(endTimestamp).format("YYYY-MM-DD 00:00:00");
                return [[], [startTime, endSubtract], [startTodayTime, endTime]];
            }
            else {
                return [[], [startTime, endTime], []];
            }
        }
        let list = [[], [], []];
        if (startTime > moment(startTimestamp).format("YYYY-MM-DD 00:00:00")) {
            let startList = [startTime, moment(startTime).format("YYYY-MM-DD 23:59:59:999")];
            list[0] = startList;
        }
        if (endTime < moment(endTimestamp).format("YYYY-MM-DD 23:59:59")) {
            let endList = [moment(endTime).format("YYYY-MM-DD 00:00:00"), endTime];
            list[2] = endList;
        }
        else if (endTime == moment().format("YYYY-MM-DD 23:59:59")) {
            let endList = [moment().format("YYYY-MM-DD 00:00:00"), endTime];
            list[2] = endList;
        }
        let middleList = [];
        if (startTime > moment(startTimestamp).format("YYYY-MM-DD 00:00:00")) {
            middleList[0] = moment(startTimestamp).add(1, 'days').format("YYYY-MM-DD 00:00:00");
        }
        else {
            middleList[0] = startTime;
        }
        if (endTime == moment(endTimestamp).format("YYYY-MM-DD 23:59:59") && endTime != moment().format("YYYY-MM-DD 23:59:59")) {
            middleList[1] = endTime;
        }
        else {
            middleList[1] = moment(endTimestamp).subtract(1, 'days').format("YYYY-MM-DD 23:59:59");
        }
        list[1] = middleList;
        return list;
    }
}
exports.DateTime2GameRecordService = DateTime2GameRecordService;
exports.default = new DateTime2GameRecordService();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGF0ZVRpbWUyR2FtZVJlY29yZC5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vYXBwL3NlcnZlcnMvZ21zQXBpL2xpYi9tb2R1bGVzL21hbmFnZXJCYWNrZW5kQXBpL2FnZW50L0RhdGVUaW1lMkdhbWVSZWNvcmQuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxpQ0FBaUM7QUFvQmpDLE1BQWEsMEJBQTBCO0lBTW5DLEtBQUssQ0FBQyxXQUFXLENBQUMsaUJBQXlCLElBQUksRUFBRSxlQUF1QixJQUFJO1FBR3hFLElBQUksY0FBYyxLQUFLLElBQUksSUFBSSxZQUFZLEtBQUssSUFBSSxFQUFFO1lBQ2xELE1BQU0sYUFBYSxHQUFHLE1BQU0sRUFBRSxDQUFDLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO1lBQzdELE1BQU0sV0FBVyxHQUFHLE1BQU0sRUFBRSxDQUFDLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO1lBQzNELE9BQU8sQ0FBQyxFQUFFLEVBQUUsQ0FBQyxhQUFhLEVBQUUsV0FBVyxDQUFDLENBQUMsQ0FBQztTQUM3QztRQUVELElBQUcsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLE1BQU0sRUFBRSxDQUFDLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxNQUFNLENBQUMscUJBQXFCLENBQUMsSUFBSSxNQUFNLEVBQUUsQ0FBQyxNQUFNLENBQUMscUJBQXFCLENBQUMsRUFBQztZQUM5TCxNQUFNLGFBQWEsR0FBRyxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUMsTUFBTSxDQUFDLHFCQUFxQixDQUFDLENBQUM7WUFDM0UsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO1lBQ3ZFLE9B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