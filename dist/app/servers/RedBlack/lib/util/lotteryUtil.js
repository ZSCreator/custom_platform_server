"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.filterLotteryResult = exports.buildRecordResult = exports.getPersonalControlResult = exports.getWinORLossResult = exports.randomLottery = exports.getRandomLotteryResult = exports.settle = exports.compare = exports.lottery = exports.GetColour = exports.getCardValue = void 0;
const RedBlackConst_1 = require("../RedBlackConst");
const GameUtil_1 = require("../../../../utils/GameUtil");
const commonConst_1 = require("../../../../domain/CommonControl/config/commonConst");
function generatePuker() {
    const arr = [];
    for (let i = 1; i < 52; i += 1) {
        arr.push(i);
    }
    arr.sort((a, b) => Math.random() > 0.5 ? -1 : 1);
    return arr;
}
function judgeColor(cards) {
    cards.sort((x, y) => x - y);
    if (cards[2] >= 0 && cards[2] < 13) {
        return true;
    }
    else if (cards[2] > 12 && cards[2] < 26) {
        if (cards[0] > 12)
            return true;
    }
    else if (cards[2] > 25 && cards[2] < 39) {
        if (cards[0] > 25)
            return true;
    }
    else {
        if (cards[0] > 38)
            return true;
    }
    return false;
}
function judgeShunza(cards) {
    const ShunzaCards = cards.map(card => card % 13).sort((card1, card2) => {
        return card1 - card2;
    });
    if (ShunzaCards[0] === 0 && ShunzaCards[1] === 11 && ShunzaCards[2] === 12) {
        return true;
    }
    for (let i = 0, len = ShunzaCards.length - 1; i < len; i++) {
        if (ShunzaCards[i] + 1 !== ShunzaCards[i + 1])
            return false;
    }
    return true;
}
function judgeBao(cards) {
    return cards.map(card => card % 13).every((card, index, arr) => {
        return arr[0] === card;
    });
}
function judgePair(cards, reuse = false) {
    const reCards = cards.map(card => card % 13);
    for (let i = 0, len = reCards.length - 1; i < len; i++) {
        for (let j = i + 1, len1 = reCards.length; j < len1; j++) {
            if (reCards[i] === reCards[j]) {
                if (reuse)
                    return reCards.filter(card => card !== reCards[i])[0];
                return RedBlackConst_1.pair[reCards[i]];
            }
        }
    }
    return false;
}
function getCardValue(card) {
    let CardValue = card % 13 == 0 ? 14 : card % 13;
    return CardValue;
}
exports.getCardValue = getCardValue;
;
function GetColour(card) {
    if (card < 13) {
        return 4;
    }
    else if (card < 26) {
        return 3;
    }
    else if (card < 39) {
        return 2;
    }
    else {
        return 1;
    }
}
exports.GetColour = GetColour;
function judgecardType(cards) {
    const Bao = judgeBao(cards);
    if (Bao)
        return RedBlackConst_1.otherPair.leopard;
    const pair = judgePair(cards);
    if (pair)
        return pair;
    const color = judgeColor(cards);
    const shunza = judgeShunza(cards);
    if (color && shunza)
        return RedBlackConst_1.otherPair.flush;
    if (shunza)
        return RedBlackConst_1.otherPair.shunza;
    if (color)
        return RedBlackConst_1.otherPair.flower;
    return RedBlackConst_1.otherPair.singular;
}
function lottery() {
    const puke = generatePuker();
    let result = {};
    result.red = {};
    result.black = {};
    result.red.cards = puke.splice(0, 3);
    result.black.cards = puke.splice(0, 3);
    result.red.count = judgecardType(result.red.cards);
    result.black.count = judgecardType(result.black.cards);
    return result;
}
exports.lottery = lottery;
function compare(reds, blacks) {
    const red = Object.assign({}, reds), black = Object.assign({}, blacks);
    if (red.count > black.count) {
        return { win: RedBlackConst_1.betArea.red, luck: red.count };
    }
    if (red.count < black.count) {
        return { win: RedBlackConst_1.betArea.black, luck: black.count };
    }
    let [...redCards] = reds.cards;
    let [...blackCards] = blacks.cards;
    redCards.sort((a, b) => getCardValue(b) - getCardValue(a));
    blackCards.sort((a, b) => getCardValue(b) - getCardValue(a));
    for (let idx = 0; idx < redCards.length; idx++) {
        const Rcard = redCards[idx];
        const Bcard = blackCards[idx];
        if (getCardValue(Rcard) > getCardValue(Bcard)) {
            return { win: RedBlackConst_1.betArea.red, luck: red.count };
        }
        if (getCardValue(Rcard) < getCardValue(Bcard)) {
            return { win: RedBlackConst_1.betArea.black, luck: black.count };
        }
    }
    for (let idx = 0; idx < redCards.length; idx++) {
        const Rcard = redCards[idx];
        const Bcard = blackCards[idx];
        if (GetColour(Rcard) > GetColour(Bcard)) {
            return { win: RedBlackConst_1.betArea.red, luck: red.count };
        }
        if (GetColour(Rcard) < GetColour(Bcard)) {
            return { win: RedBlackConst_1.betArea.black, luck: black.count };
        }
    }
}
exports.compare = compare;
;
function settle(players, killAreas) {
    const lotteryResult = lottery();
    const winArea = compare(lotteryResult.red, lotteryResult.black);
    let allBetNum = 0;
    let totalRebate = 0;
    for (const pl of players) {
        pl.profit = 0;
        for (const area in pl.bets) {
            pl.bets[area].profit = 0;
            let bet = pl.bets[area].bet;
            allBetNum += bet;
            if (area === RedBlackConst_1.betArea.luck) {
                if (!!winArea.luck && winArea.luck >= RedBlackConst_1.pair[7]) {
                    let gold = pl.bets[area].bet * RedBlackConst_1.odds2[winArea.luck];
                    pl.bets[area].profit = gold;
                    if (!killAreas.has(area)) {
                        totalRebate += gold;
                    }
                    pl.profit += gold;
                    continue;
                }
            }
            if (area === winArea.win) {
                let gold = pl.bets[area].bet * RedBlackConst_1.odds2[winArea.win];
                pl.bets[area].profit = gold;
                if (!killAreas.has(area)) {
                    totalRebate += gold;
                }
                pl.profit += gold;
            }
        }
    }
    return { totalRebate, allBetNum, winArea, results: lotteryResult };
}
exports.settle = settle;
function getRandomLotteryResult(players, killAreas) {
    return settle(players, killAreas);
}
exports.getRandomLotteryResult = getRandomLotteryResult;
function randomLottery(players, killAreas) {
    let result = getRandomLotteryResult(players, killAreas);
    for (let i = 0; i < 200; i++) {
        if (!containKillAreas({ killAreas, winAreas: result.winArea })) {
            break;
        }
        result = getRandomLotteryResult(players, killAreas);
    }
    return result;
}
exports.randomLottery = randomLottery;
function getWinORLossResult(players, filterType, bet, killAreas, isSystemWin) {
    let result = getRandomLotteryResult(players, killAreas);
    for (let i = 0; i < 100; i++) {
        filterLotteryResult(result, players, filterType);
        if (killAreas.size > 0) {
            if (containKillAreas({ killAreas, winAreas: result.winArea })) {
                result = getRandomLotteryResult(players, killAreas);
                continue;
            }
            else {
                break;
            }
        }
        if (result.totalRebate === 0 && bet === 0) {
            break;
        }
        if (filterType === 2) {
            if (isSystemWin && result.totalRebate > bet) {
                break;
            }
            if (!isSystemWin && result.totalRebate <= bet) {
                break;
            }
        }
        else {
            if (isSystemWin && result.totalRebate <= bet) {
                break;
            }
            if (!isSystemWin && result.totalRebate > bet) {
                break;
            }
        }
        result = getRandomLotteryResult(players, killAreas);
    }
    return result;
}
exports.getWinORLossResult = getWinORLossResult;
function getPersonalControlResult(players, bet, state, killAreas, statisticType) {
    let result;
    for (let i = 0; i < 100; i++) {
        result = getRandomLotteryResult(players, killAreas);
        const totalRebate = filterControlPlayersTotalRebate(players, state);
        if (state === commonConst_1.CommonControlState.WIN && totalRebate > bet ||
            state === commonConst_1.CommonControlState.LOSS && totalRebate <= bet) {
            break;
        }
    }
    return result;
}
exports.getPersonalControlResult = getPersonalControlResult;
function test(cards) {
    const arr = [];
    const cardCount = { 0: "A", 1: "2", 2: "3", 3: "4", 4: "5", 5: "6", 6: "7", 7: "8", 8: "9", 9: "10", 10: "J", 11: "Q", 12: "K" };
    cards.forEach(card => {
        if (card < 13) {
            arr.push(`黑桃${cardCount[card % 13]}`);
        }
        else if (card < 26) {
            arr.push(`红桃${cardCount[card % 13]}`);
        }
        else if (card < 39) {
            arr.push(`梅花${cardCount[card % 13]}`);
        }
        else {
            arr.push(`方块${cardCount[card % 13]}`);
        }
    });
    return arr;
}
function containKillAreas(params) {
    if (params.killAreas.has(params.winAreas.win)) {
        return true;
    }
    return params.killAreas.has('luck') && params.winAreas.luck > 7;
}
const winAreaMapping = {
    red: '1',
    black: '2'
};
function buildRecordResult(lotteryResult, winAreas) {
    let redCount = lotteryResult.red.count.toString(), red = (0, GameUtil_1.conversionCards)(lotteryResult.red.cards), black = (0, GameUtil_1.conversionCards)(lotteryResult.black.cards), blackCount = lotteryResult.black.count.toString(), winCount = winAreas.luck.toString();
    if (redCount.length === 1)
        redCount = `0${redCount}`;
    if (blackCount.length === 1)
        blackCount = `0${blackCount}`;
    if (winCount.length === 1)
        winCount = `0${winCount}`;
    return `${red}${redCount}${black}${blackCount}${winAreaMapping[winAreas.win]}${winCount}`;
}
exports.buildRecordResult = buildRecordResult;
function filterControlPlayersTotalRebate(players, state) {
    return players.reduce((num, player) => {
        if (player.controlState === state) {
            num += player.profit;
        }
        return num;
    }, 0);
}
function filterLotteryResult(result, players, filterType) {
    if (filterType === 4) {
        return;
    }
    result.totalRebate = 0;
    for (const pl of players) {
        if (!!pl && pl.isRobot === filterType) {
            result.totalRebate += pl.profit;
        }
    }
}
exports.filterLotteryResult = filterLotteryResult;
;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG90dGVyeVV0aWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9hcHAvc2VydmVycy9SZWRCbGFjay9saWIvdXRpbC9sb3R0ZXJ5VXRpbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxvREFBbUU7QUFDbkUseURBQTZEO0FBQzdELHFGQUF5RjtBQXFCekYsU0FBUyxhQUFhO0lBQ2xCLE1BQU0sR0FBRyxHQUFhLEVBQUUsQ0FBQztJQUV6QixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUU7UUFDNUIsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUNmO0lBRUQsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNqRCxPQUFPLEdBQUcsQ0FBQztBQUNmLENBQUM7QUFHRCxTQUFTLFVBQVUsQ0FBQyxLQUFLO0lBQ3JCLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDNUIsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUU7UUFDaEMsT0FBTyxJQUFJLENBQUM7S0FDZjtTQUFNLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFO1FBQ3ZDLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUU7WUFBRSxPQUFPLElBQUksQ0FBQztLQUNsQztTQUFNLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFO1FBQ3ZDLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUU7WUFBRSxPQUFPLElBQUksQ0FBQztLQUNsQztTQUFNO1FBQ0gsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRTtZQUFFLE9BQU8sSUFBSSxDQUFDO0tBQ2xDO0lBQ0QsT0FBTyxLQUFLLENBQUM7QUFDakIsQ0FBQztBQUdELFNBQVMsV0FBVyxDQUFDLEtBQWU7SUFDaEMsTUFBTSxXQUFXLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLEVBQUU7UUFDbkUsT0FBTyxLQUFLLEdBQUcsS0FBSyxDQUFDO0lBQ3pCLENBQUMsQ0FBQyxDQUFDO0lBQ0gsSUFBSSxXQUFXLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLElBQUksV0FBVyxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRTtRQUN4RSxPQUFPLElBQUksQ0FBQztLQUNmO0lBRUQsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxHQUFHLFdBQVcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDeEQsSUFBSSxXQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLFdBQVcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQUUsT0FBTyxLQUFLLENBQUM7S0FDL0Q7SUFDRCxPQUFPLElBQUksQ0FBQztBQUNoQixDQUFDO0FBR0QsU0FBUyxRQUFRLENBQUMsS0FBSztJQUNuQixPQUFPLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsRUFBRTtRQUMzRCxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUM7SUFDM0IsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDO0FBR0QsU0FBUyxTQUFTLENBQUMsS0FBZSxFQUFFLEtBQUssR0FBRyxLQUFLO0lBQzdDLE1BQU0sT0FBTyxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFFN0MsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxHQUFHLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDcEQsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDdEQsSUFBSSxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFO2dCQUMzQixJQUFJLEtBQUs7b0JBQUUsT0FBTyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxLQUFLLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNqRSxPQUFPLG9CQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDM0I7U0FDSjtLQUNKO0lBQ0QsT0FBTyxLQUFLLENBQUM7QUFDakIsQ0FBQztBQU1BLFNBQWdCLFlBQVksQ0FBQyxJQUFZO0lBQ3RDLElBQUksU0FBUyxHQUFHLElBQUksR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7SUFDaEQsT0FBTyxTQUFTLENBQUM7QUFFckIsQ0FBQztBQUpBLG9DQUlBO0FBQUEsQ0FBQztBQUlGLFNBQWdCLFNBQVMsQ0FBQyxJQUFZO0lBQ2xDLElBQUksSUFBSSxHQUFHLEVBQUUsRUFBRTtRQUNYLE9BQU8sQ0FBQyxDQUFDO0tBQ1o7U0FBTSxJQUFJLElBQUksR0FBRyxFQUFFLEVBQUU7UUFDbEIsT0FBTyxDQUFDLENBQUM7S0FDWjtTQUFNLElBQUksSUFBSSxHQUFHLEVBQUUsRUFBRTtRQUNsQixPQUFPLENBQUMsQ0FBQztLQUNaO1NBQU07UUFDSCxPQUFPLENBQUMsQ0FBQztLQUNaO0FBQ0wsQ0FBQztBQVZELDhCQVVDO0FBRUQsU0FBUyxhQUFhLENBQUMsS0FBZTtJQUVsQyxNQUFNLEdBQUcsR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDNUIsSUFBSSxHQUFHO1FBQUUsT0FBTyx5QkFBUyxDQUFDLE9BQU8sQ0FBQztJQUdsQyxNQUFNLElBQUksR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDOUIsSUFBSSxJQUFJO1FBQUUsT0FBTyxJQUFJLENBQUM7SUFFdEIsTUFBTSxLQUFLLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2hDLE1BQU0sTUFBTSxHQUFHLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNsQyxJQUFJLEtBQUssSUFBSSxNQUFNO1FBQUUsT0FBTyx5QkFBUyxDQUFDLEtBQUssQ0FBQztJQUM1QyxJQUFJLE1BQU07UUFBRSxPQUFPLHlCQUFTLENBQUMsTUFBTSxDQUFDO0lBQ3BDLElBQUksS0FBSztRQUFFLE9BQU8seUJBQVMsQ0FBQyxNQUFNLENBQUM7SUFDbkMsT0FBTyx5QkFBUyxDQUFDLFFBQVEsQ0FBQztBQUM5QixDQUFDO0FBR0QsU0FBZ0IsT0FBTztJQUNuQixNQUFNLElBQUksR0FBRyxhQUFhLEVBQUUsQ0FBQztJQUM3QixJQUFJLE1BQU0sR0FBaUcsRUFBRSxDQUFDO0lBRTlHLE1BQU0sQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDO0lBQ2hCLE1BQU0sQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDO0lBQ2xCLE1BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3JDLE1BQU0sQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3ZDLE1BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxHQUFHLGFBQWEsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ25ELE1BQU0sQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLGFBQWEsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBRXZELE9BQU8sTUFBTSxDQUFDO0FBQ2xCLENBQUM7QUFaRCwwQkFZQztBQUdELFNBQWdCLE9BQU8sQ0FBQyxJQUEwQyxFQUFFLE1BQTRDO0lBQzVHLE1BQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxFQUFFLEtBQUssR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN2RSxJQUFJLEdBQUcsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLEtBQUssRUFBRTtRQUN6QixPQUFPLEVBQUUsR0FBRyxFQUFFLHVCQUFPLENBQUMsR0FBRyxFQUFFLElBQUksRUFBRSxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUM7S0FDaEQ7SUFDRCxJQUFJLEdBQUcsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLEtBQUssRUFBRTtRQUN6QixPQUFPLEVBQUUsR0FBRyxFQUFFLHVCQUFPLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7S0FDcEQ7SUFHRCxJQUFJLENBQUMsR0FBRyxRQUFRLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQy9CLElBQUksQ0FBQyxHQUFHLFVBQVUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUM7SUFFbkMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsR0FBRyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMzRCxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxHQUFHLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBVzdELEtBQUssSUFBSSxHQUFHLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxRQUFRLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQzVDLE1BQU0sS0FBSyxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUM1QixNQUFNLEtBQUssR0FBRyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDOUIsSUFBSSxZQUFZLENBQUMsS0FBSyxDQUFDLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQyxFQUFFO1lBQzNDLE9BQU8sRUFBRSxHQUFHLEVBQUUsdUJBQU8sQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQztTQUNoRDtRQUNELElBQUksWUFBWSxDQUFDLEtBQUssQ0FBRSxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUUsRUFBRTtZQUM3QyxPQUFPLEVBQUUsR0FBRyxFQUFFLHVCQUFPLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7U0FDcEQ7S0FDSjtJQUNELEtBQUssSUFBSSxHQUFHLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxRQUFRLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQzVDLE1BQU0sS0FBSyxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUM1QixNQUFNLEtBQUssR0FBRyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDOUIsSUFBSSxTQUFTLENBQUMsS0FBSyxDQUFDLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxFQUFFO1lBQ3JDLE9BQU8sRUFBRSxHQUFHLEVBQUUsdUJBQU8sQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQztTQUNoRDtRQUNELElBQUksU0FBUyxDQUFDLEtBQUssQ0FBQyxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUNyQyxPQUFPLEVBQUUsR0FBRyxFQUFFLHVCQUFPLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7U0FDcEQ7S0FDSjtBQUNMLENBQUM7QUE3Q0QsMEJBNkNDO0FBQUEsQ0FBQztBQUdGLFNBQWdCLE1BQU0sQ0FBQyxPQUE2QixFQUFFLFNBQXNCO0lBQ3hFLE1BQU0sYUFBYSxHQUFHLE9BQU8sRUFBRSxDQUFDO0lBQ2hDLE1BQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFFLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQTtJQUcvRCxJQUFJLFNBQVMsR0FBRyxDQUFDLENBQUE7SUFDakIsSUFBSSxXQUFXLEdBQUcsQ0FBQyxDQUFDO0lBRXBCLEtBQUssTUFBTSxFQUFFLElBQUksT0FBTyxFQUFFO1FBQ3RCLEVBQUUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBQ2QsS0FBSyxNQUFNLElBQUksSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFO1lBQ3hCLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztZQUN6QixJQUFJLEdBQUcsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQztZQUM1QixTQUFTLElBQUksR0FBRyxDQUFDO1lBQ2pCLElBQUksSUFBSSxLQUFLLHVCQUFPLENBQUMsSUFBSSxFQUFFO2dCQUN2QixJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxJQUFJLE9BQU8sQ0FBQyxJQUFJLElBQUksb0JBQUksQ0FBQyxDQUFDLENBQUMsRUFBRTtvQkFDM0MsSUFBSSxJQUFJLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcscUJBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7b0JBQ25ELEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQTtvQkFFM0IsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUU7d0JBQ3RCLFdBQVcsSUFBSSxJQUFJLENBQUM7cUJBQ3ZCO29CQUNELEVBQUUsQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDO29CQUNsQixTQUFTO2lCQUNaO2FBQ0o7WUFFRCxJQUFJLElBQUksS0FBSyxPQUFPLENBQUMsR0FBRyxFQUFFO2dCQUN0QixJQUFJLElBQUksR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxxQkFBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDbEQsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO2dCQUM1QixJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRTtvQkFDdEIsV0FBVyxJQUFJLElBQUksQ0FBQztpQkFDdkI7Z0JBQ0QsRUFBRSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUM7YUFDckI7U0FDSjtLQUNKO0lBQ0QsT0FBTyxFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxhQUFhLEVBQUUsQ0FBQztBQUN2RSxDQUFDO0FBdENELHdCQXNDQztBQUtELFNBQWdCLHNCQUFzQixDQUFDLE9BQTZCLEVBQUUsU0FBc0I7SUFHeEYsT0FBTyxNQUFNLENBQUMsT0FBTyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0FBRXRDLENBQUM7QUFMRCx3REFLQztBQUtELFNBQWdCLGFBQWEsQ0FBQyxPQUE2QixFQUFFLFNBQXNCO0lBQy9FLElBQUksTUFBTSxHQUFHLHNCQUFzQixDQUFDLE9BQU8sRUFBRSxTQUFTLENBQUMsQ0FBQztJQUN4RCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQzFCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDLEVBQUU7WUFDNUQsTUFBTTtTQUNUO1FBQ0QsTUFBTSxHQUFHLHNCQUFzQixDQUFDLE9BQU8sRUFBRSxTQUFTLENBQUMsQ0FBQztLQUN2RDtJQUNELE9BQU8sTUFBTSxDQUFDO0FBQ2xCLENBQUM7QUFURCxzQ0FTQztBQVdELFNBQWdCLGtCQUFrQixDQUFDLE9BQTZCLEVBQUUsVUFBa0IsRUFBRSxHQUFHLEVBQUUsU0FBc0IsRUFBRSxXQUFvQjtJQUNuSSxJQUFJLE1BQU0sR0FBRyxzQkFBc0IsQ0FBQyxPQUFPLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDeEQsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUUxQixtQkFBbUIsQ0FBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBSWpELElBQUksU0FBUyxDQUFDLElBQUksR0FBRyxDQUFDLEVBQUU7WUFFcEIsSUFBSSxnQkFBZ0IsQ0FBQyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDLEVBQUU7Z0JBQzNELE1BQU0sR0FBRyxzQkFBc0IsQ0FBQyxPQUFPLEVBQUUsU0FBUyxDQUFDLENBQUM7Z0JBQ3BELFNBQVM7YUFDWjtpQkFBTTtnQkFDSCxNQUFNO2FBQ1Q7U0FDSjtRQUVELElBQUksTUFBTSxDQUFDLFdBQVcsS0FBSyxDQUFDLElBQUksR0FBRyxLQUFLLENBQUMsRUFBRTtZQUN2QyxNQUFNO1NBQ1Q7UUFFRCxJQUFJLFVBQVUsS0FBSyxDQUFDLEVBQUU7WUFDbEIsSUFBSSxXQUFXLElBQUksTUFBTSxDQUFDLFdBQVcsR0FBRyxHQUFHLEVBQUU7Z0JBQ3pDLE1BQU07YUFDVDtZQUVELElBQUksQ0FBQyxXQUFXLElBQUksTUFBTSxDQUFDLFdBQVcsSUFBSSxHQUFHLEVBQUU7Z0JBQzNDLE1BQU07YUFDVDtTQUNKO2FBQU07WUFDSCxJQUFJLFdBQVcsSUFBSSxNQUFNLENBQUMsV0FBVyxJQUFJLEdBQUcsRUFBRTtnQkFDMUMsTUFBTTthQUNUO1lBRUQsSUFBSSxDQUFDLFdBQVcsSUFBSSxNQUFNLENBQUMsV0FBVyxHQUFHLEdBQUcsRUFBRTtnQkFDMUMsTUFBTTthQUNUO1NBQ0o7UUFFRCxNQUFNLEdBQUcsc0JBQXNCLENBQUMsT0FBTyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0tBQ3ZEO0lBQ0QsT0FBTyxNQUFNLENBQUM7QUFDbEIsQ0FBQztBQTNDRCxnREEyQ0M7QUFLRCxTQUFnQix3QkFBd0IsQ0FBQyxPQUE2QixFQUNsRSxHQUFXLEVBQ1gsS0FBeUIsRUFDekIsU0FBc0IsRUFDdEIsYUFBMkI7SUFDM0IsSUFBSSxNQUFNLENBQUM7SUFDWCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQzFCLE1BQU0sR0FBRyxzQkFBc0IsQ0FBQyxPQUFPLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFJcEQsTUFBTSxXQUFXLEdBQUcsK0JBQStCLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBRXBFLElBQUksS0FBSyxLQUFLLGdDQUFrQixDQUFDLEdBQUcsSUFBSSxXQUFXLEdBQUcsR0FBRztZQUNyRCxLQUFLLEtBQUssZ0NBQWtCLENBQUMsSUFBSSxJQUFJLFdBQVcsSUFBSSxHQUFHLEVBQUU7WUFDekQsTUFBTTtTQUNUO0tBQ0o7SUFDRCxPQUFPLE1BQU0sQ0FBQztBQUNsQixDQUFDO0FBbkJELDREQW1CQztBQWFELFNBQVMsSUFBSSxDQUFDLEtBQUs7SUFDZixNQUFNLEdBQUcsR0FBRyxFQUFFLENBQUM7SUFDZixNQUFNLFNBQVMsR0FBRyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQztJQUNqSSxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ2pCLElBQUksSUFBSSxHQUFHLEVBQUUsRUFBRTtZQUNYLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxTQUFTLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztTQUN6QzthQUFNLElBQUksSUFBSSxHQUFHLEVBQUUsRUFBRTtZQUNsQixHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssU0FBUyxDQUFDLElBQUksR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDekM7YUFBTSxJQUFJLElBQUksR0FBRyxFQUFFLEVBQUU7WUFDbEIsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLFNBQVMsQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1NBQ3pDO2FBQU07WUFDSCxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssU0FBUyxDQUFDLElBQUksR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDekM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUNILE9BQU8sR0FBRyxDQUFDO0FBQ2YsQ0FBQztBQU1ELFNBQVMsZ0JBQWdCLENBQUMsTUFBMkU7SUFDakcsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxFQUFFO1FBQzNDLE9BQU8sSUFBSSxDQUFDO0tBQ2Y7SUFFRCxPQUFPLE1BQU0sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQztBQUNwRSxDQUFDO0FBb0JELE1BQU0sY0FBYyxHQUFHO0lBQ25CLEdBQUcsRUFBRSxHQUFHO0lBQ1IsS0FBSyxFQUFFLEdBQUc7Q0FDYixDQUFDO0FBT0YsU0FBZ0IsaUJBQWlCLENBQUMsYUFBNEIsRUFBRSxRQUF3QztJQUNwRyxJQUFJLFFBQVEsR0FBRyxhQUFhLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsRUFDN0MsR0FBRyxHQUFHLElBQUEsMEJBQWUsRUFBQyxhQUFhLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUM5QyxLQUFLLEdBQUcsSUFBQSwwQkFBZSxFQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQ2xELFVBQVUsR0FBRyxhQUFhLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsRUFDakQsUUFBUSxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7SUFFeEMsSUFBSSxRQUFRLENBQUMsTUFBTSxLQUFLLENBQUM7UUFBRSxRQUFRLEdBQUcsSUFBSSxRQUFRLEVBQUUsQ0FBQztJQUNyRCxJQUFJLFVBQVUsQ0FBQyxNQUFNLEtBQUssQ0FBQztRQUFFLFVBQVUsR0FBRyxJQUFJLFVBQVUsRUFBRSxDQUFDO0lBQzNELElBQUksUUFBUSxDQUFDLE1BQU0sS0FBSyxDQUFDO1FBQUUsUUFBUSxHQUFHLElBQUksUUFBUSxFQUFFLENBQUM7SUFFckQsT0FBTyxHQUFHLEdBQUcsR0FBRyxRQUFRLEdBQUcsS0FBSyxHQUFHLFVBQVUsR0FBRyxjQUFjLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHLFFBQVEsRUFBRSxDQUFDO0FBQzlGLENBQUM7QUFaRCw4Q0FZQztBQU9ELFNBQVMsK0JBQStCLENBQUMsT0FBNkIsRUFBRSxLQUF5QjtJQUM3RixPQUFPLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsTUFBTSxFQUFFLEVBQUU7UUFDbEMsSUFBSSxNQUFNLENBQUMsWUFBWSxLQUFLLEtBQUssRUFBRTtZQUMvQixHQUFHLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQztTQUN4QjtRQUVELE9BQU8sR0FBRyxDQUFDO0lBQ2YsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO0FBQ1QsQ0FBQztBQVNELFNBQWdCLG1CQUFtQixDQUFDLE1BQU0sRUFBRSxPQUE2QixFQUFFLFVBQWtCO0lBRXpGLElBQUksVUFBVSxLQUFLLENBQUMsRUFBRTtRQUNsQixPQUFPO0tBQ1Y7SUFFRCxNQUFNLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQztJQUN2QixLQUFLLE1BQU0sRUFBRSxJQUFJLE9BQU8sRUFBRTtRQUN0QixJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLE9BQU8sS0FBSyxVQUFVLEVBQUU7WUFDbkMsTUFBTSxDQUFDLFdBQVcsSUFBSSxFQUFFLENBQUMsTUFBTSxDQUFDO1NBQ25DO0tBQ0o7QUFTTCxDQUFDO0FBcEJELGtEQW9CQztBQUFBLENBQUMifQ==