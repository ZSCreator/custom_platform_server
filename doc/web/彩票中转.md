# 彩票中转

## 项目描述

```text
该项目主要用于对彩票的开奖结果进行本地化，提供给个彩票游戏服调用的web程序。
```

## 版本管理

- [lotteryMiddleServer](http://xxx@192.168.1.112:60/r/pokGame/lotteryMiddleServer.git)

### 分支

```text
├── master                      主分支封装了数据库mongo&redis数据连接，配置读取，配置坏境，工具集 
│   
└── masters                     功能分支集合                  <分支路径>
    └── lottery                 彩票中转功能                  <分支路径>           
        ├── dev                 功能开发分支                  <实际分支>     
        ├── release             功能发布分支                  <实际分支>
        └── master              功能主分支                    <实际分支>
        
        
  注意事项，改分支可以将master的基本分支合并到对应的功能分支，但是对应业务功能分支只能由:
  masters/lottery/dev-> masters/lottery/release     release 带有坏境配置不能和master相互合并
  masters/lottery/dev-> masters/lottery/master      release 带有坏境配置不能和master相互合并
```

## 文件结构

```text

├── config
│   ├── dev                 开发环境配置
│   │     └── lottery       彩票源开奖配置
│   │          ├── boyiApiAccount.json                《博易》彩票源接口配置    
│   │          ├── caipiaokongApiAccount.json         《彩票控》源接口配置      *暂未使用*
│   │          ├── sicaiApiAccount.json               《私彩》私彩接口配置
│   │          └── jiekouApiAccount.json              《接口API》源接口配置
│   │ 
│   ├── prod                生产环境配置
│   ├── env.js              指定坏境
│   └── index.js            配置初始化
│   
├── server  
│   ├── consts              常量文件目录
│   ├── controller          接口控制层
│   ├── db                  数据库连接
│   ├── services            服务层
│   ├── tickTask            彩票定时器
│   └── util                工具
│     
├── lottery-api.js          彩票中转web接口启动器      生产坏境使用pm2启动集群的方式启动 <pm2 start lottery-api.js -i 3 >
└── lottery-task.js         彩票定时任务启动器         生产坏境使用pm2启动fork的方式启动 <pm2 start lottery-api.js -x >
```

## 发布

```text
采用Jenkins发布服务
支付->彩票中转
发布分支masters/lottery/release
```
